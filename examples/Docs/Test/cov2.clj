[{:code {:label "Code", :opts {:order :row, :eltsper 1, :size "auto", :wrapfn {:tid :code, :$split nil, :out-width "1000px", :fn [quote editor-repl-tab], :layout :left-right, :ns cov2.code, :ed-out-order :first-last, :width "730px", :md-defaults nil, :src "\n\n;;; Vars for some global urls...\n;;; Put cursor at right paren and 'Ctrl-X Ctrl-E' them...\n(def vgdata-base\n  \"https://raw.githubusercontent.com/vega/vega-datasets/master/data/\")\n(def us-10m (str vgdata-base \"us-10m.json\"))\n\n\n(def name->id\n  (-> (str vgdata-base \"income.json\") slurp (json/read-str :key-fn keyword)\n    (->> (group-by :name)\n      (mapv (fn[[state v]] [state ((first v) :id)]))\n      (into {}))))\n\n(def state-codes \n  [{:name \"Alabama\", :code \"AL\"} {:name \"Montana\", :code \"MT\"}\n   {:name \"Alaska\", :code \"AK\"} {:name \"Nebraska\", :code \"NE\"}\n   {:name \"Arizona\", :code \"AZ\"} {:name \"Nevada\", :code \"NV\"}\n   {:name \"Arkansas\", :code \"AR\"} {:name \"New Hampshire\", :code \"NH\"}\n   {:name \"California\", :code \"CA\"} {:name \"New Jersey\", :code \"NJ\"}\n   {:name \"Colorado\", :code \"CO\"} {:name \"New Mexico\", :code \"NM\"}\n   {:name \"Connecticut\", :code \"CT\"} {:name \"New York\", :code \"NY\"}\n   {:name \"Delaware\", :code \"DE\"} {:name \"North Carolina\", :code \"NC\"}\n   {:name \"Florida\", :code \"FL\"} {:name \"North Dakota\", :code \"ND\"}\n   {:name \"Georgia\", :code \"GA\"} {:name \"Ohio\", :code \"OH\"}\n   {:name \"Hawaii\", :code \"HI\"} {:name \"Oklahoma\", :code \"OK\"}\n   {:name \"Idaho\", :code \"ID\"} {:name \"Oregon\", :code \"OR\"}\n   {:name \"Illinois\", :code \"IL\"} {:name \"Pennsylvania\", :code \"PA\"}\n   {:name \"Indiana\", :code \"IN\"} {:name \"Rhode Island\", :code \"RI\"}\n   {:name \"Iowa\", :code \"IA\"} {:name \"South Carolina\", :code \"SC\"}\n   {:name \"Kansas\", :code \"KS\"} {:name \"South Dakota\", :code \"SD\"}\n   {:name \"Kentucky\", :code \"KY\"} {:name \"Tennessee\", :code \"TN\"}\n   {:name \"Louisiana\", :code \"LA\"} {:name \"Texas\", :code \"TX\"}\n   {:name \"Maine\", :code \"ME\"} {:name \"Utah\", :code \"UT\"}\n   {:name \"Maryland\", :code \"MD\"} {:name \"Vermont\", :code \"VT\"}\n   {:name \"Massachusetts\", :code \"MA\"} {:name \"Virginia\", :code \"VA\"}\n   {:name \"Michigan\", :code \"MI\"} {:name \"Washington\", :code \"WA\"}\n   {:name \"Minnesota\", :code \"MN\"} {:name \"West Virginia\", :code \"WV\"}\n   {:name \"Mississippi\", :code \"MS\"} {:name \"Wisconsin\", :code \"WI\"}\n   {:name \"Missouri\", :code \"MO\"} {:name \"Wyoming\", :code \"WY\"}])\n\n(def code->state\n  (->> state-codes (mapv #(vector (% :code) (% :name)))\n       (into {})))\n\n(def state->pop\n  {\"Montana\" 1086759, \"California\" 39937489, \"Washington\" 7797095,\n   \"Massachusetts\" 6976597, \"Mississippi\" 2989260, \"Kentucky\" 4499692,\n   \"Wyoming\" 567025, \"Pennsylvania\" 12820878, \"Colorado\" 5845526,\n   \"Illinois\" 12659682, \"Virginia\" 8626207, \"Idaho\" 1826156, \"Nebraska\" 1952570\n   \"Vermont\" 628061, \"Louisiana\" 4645184, \"New Jersey\" 8936574, \"Ohio\" 11747694\n   \"Oklahoma\" 3954821, \"New Mexico\" 2096640, \"Georgia\" 10736059, \"Iowa\" 3179849\n   \"Rhode Island\" 1056161, \"North Dakota\" 761723, \"New Hampshire\" 1371246\n   \"Tennessee\" 6897576, \"Michigan\" 10045029, \"North Carolina\" 10611862\n   \"District of Columbia\" 720687, \"Hawaii\" 1412687, \"Kansas\" 2910357\n   \"Maryland\" 6083116, \"Connecticut\" 3563077, \"Oregon\" 4301089\n   \"South Dakota\" 903027, \"Arizona\" 7378494, \"New York\" 19440469\n   \"Wisconsin\" 5851754, \"Puerto Rico\" 3032165, \"Missouri\" 6169270\n   \"Texas\" 29472295, \"Indiana\" 6745354, \"Nevada\" 3139658, \"Utah\" 3282115\n   \"Minnesota\" 5700671, \"Alabama\" 4908621, \"Delaware\" 982895\n   \"Florida\" 21992985, \"Arkansas\" 3038999, \"Maine\" 1345790\n   \"Alaska\" 734002, \"South Carolina\" 5210095, \"West Virginia\" 1778070})\n\n;;; First basic version\n(def state-data\n  (clj (deref\n        (def state-data\n          (->> states-csv\n            (mapv (fn[m]\n                    (let [name (code->state (m :state))]\n                      (assoc m :name name :id (name->id name)\n                             :pop (state->pop name)))))\n            (filter #(% :name)))))))\n\n\n;;; Nice little to haves\n(defn roundit [r & {:keys [places] :or {places 2}}]\n  (let [n (Math/pow 10.0 places)]\n    (-> r (* n) Math/round (/ n))))\n\n(defn log2 [x]\n  (let [ln2 (Math/log 2)]\n    (/ (Math/log x) ln2)))\n\n\n;;; Version with population and positives/population\n(def state-data\n  (clj (deref\n        (def state-data\n          (->> states-csv\n            (filter #(code->state (% :state)))\n            (mapv (fn[m]\n                    (let [name (code->state (m :state))\n                          pop (state->pop name)\n                          pos (-> m :positive Integer/parseInt)\n                          pos100K (-> pos (/ pop) (* 100000.0) roundit)]\n                      (assoc m :name name :id (name->id name)\n                             :pop pop :pos100K pos100K))))\n            (filter #(% :name)))))))\n", :out-height "900px", :eid "ed-code", :height "900px"}}, :specs []}} {:cov2 {:label "Cov2 Test", :opts {:order :col, :eltsper 2, :rgap "20px", :cgap "20px", :size "none", :wrapfn {:tid :cov2, :$split 39.013671875, :out-width "730px", :fn [quote interactive-doc-tab], :cmfids {:cm 0, :fm 0}, :ns cov2.code, :ed-out-order :first-last, :width "730px", :md-defaults nil, :src "\n\n\n\n(hc/update-defaults\n :GTTFIELD \"name\" :GTTTYPE \"nominal\"\n :PROJECTION {:type \"albersUsa\"}\n :GEOENCODING\n {:longitude {:field \"longitude\", :type \"quantitative\"},\n  :latitude {:field \"latitude\", :type \"quantitative\"},\n  :tooltip [{:field :GTTFIELD, :type :GTTTYPE}\n            {:field \"longitude\", :type \"quantitative\"}\n            {:field \"latitude\", :type \"quantitative\"}],\n  :size :SIZE})\n\n\n;;; Not a very good template - needs more and better abstraction...\n(def geo-choro\n  (assoc ht/view-base\n         :mark \"geoshape\"\n         :encoding {:shape {:field \"geo\", :type \"geojson\"},\n                    :color {:field :X, :type \"quantitative\" :scale :YSCALE}\n                    :tooltip :TOOLTIP}\n         :projection :PROJECTION))\n\n\n(def states \"http://localhost:3100/data/states.csv\")\n(def states-csv\n  (clj (deref\n        (def states-csv\n          (->> states slurp csv/read-csv rest\n            (mapv (fn[row] {:state (first row) :positive (second row)})))))))\n\n(hc/xform\n geo-choro :FID :f1 :VID :cov2-1\n :LEFT '[[p {:style {:width \"100px\":min-width \"100px\"}}]]\n :TOP '[[gap :size \"100px\"]\n         [md {:style {:font-size \"16px\"}}\n          \"**Cov2 positives per state**\"]]\n :DATA state-data\n :WIDTH 700 :HEIGHT 500\n :X \"positive\"\n :TOOLTIP [{:field \"name\" :type \"nominal\"}\n           {:field \"positive\" :type \"quantitative\"}]\n :TRANSFORM [{:lookup \"id\",\n              :from {:data {:url us-10m\n                            :format {:type \"topojson\" :feature \"states\"}}\n                     :key \"id\"}\n              :as \"geo\"}])\n\n\n(hc/xform\n geo-choro :FID :f2 :VID :cov2-2\n :LEFT '[[p {:style {:width \"100px\":min-width \"100px\"}}]]\n :TOP '[[gap :size \"100px\"]\n         [md {:style {:font-size \"16px\"}}\n          \"**Cov2 Log positives per state**\"]]\n :DATA state-data\n :WIDTH 700 :HEIGHT 500\n :X \"positive\" :YSCALE {:type \"log\"}\n :TOOLTIP [{:field \"name\" :type \"nominal\"}\n           {:field \"positive\" :type \"quantitative\"}]\n :TRANSFORM [{:lookup \"id\",\n              :from {:data {:url us-10m\n                            :format {:type \"topojson\" :feature \"states\"}}\n                     :key \"id\"}\n              :as \"geo\"}])\n\n\n(hc/xform\n geo-choro :FID :f3 :VID :cov2-3\n :LEFT '[[p {:style {:width \"100px\":min-width \"100px\"}}]]\n :TOP '[[gap :size \"100px\"]\n         [md {:style {:font-size \"16px\"}}\n          \"**Cov2 positives per 100K population**\"]]\n :DATA state-data\n :WIDTH 700 :HEIGHT 500\n :X \"pos100K\"\n :TOOLTIP [{:field \"name\" :type \"nominal\"}\n           {:field \"pop\"  :type \"quantitative\"}\n           {:field \"positive\" :type \"quantitative\"}\n           {:field \"pos100K\" :type \"quantitative\"}]\n :TRANSFORM [{:lookup \"id\",\n              :from {:data {:url us-10m\n                            :format {:type \"topojson\" :feature \"states\"}}\n                     :key \"id\"}\n              :as \"geo\"}])\n\n(hc/xform\n geo-choro :FID :f4 :VID :cov2-4\n :LEFT '[[p {:style {:width \"100px\":min-width \"100px\"}}]]\n :TOP '[[gap :size \"100px\"]\n         [md {:style {:font-size \"16px\"}}\n          \"**Cov2 Log positives per 100K population**\"]]\n :DATA state-data\n :WIDTH 700 :HEIGHT 500\n :X \"pos100K\" :YSCALE {:type \"log\"}\n :TOOLTIP [{:field \"name\" :type \"nominal\"}\n           {:field \"pop\"  :type \"quantitative\"}\n           {:field \"positive\" :type \"quantitative\"}\n           {:field \"pos100K\" :type \"quantitative\"}]\n :TRANSFORM [{:lookup \"id\",\n              :from {:data {:url us-10m\n                            :format {:type \"topojson\" :feature \"states\"}}\n                     :key \"id\"}\n              :as \"geo\"}])\n\n\n:end", :out-height "100px", :eid "ed-cov2", :height "790px"}, :ed-out-order nil}, :specs [{:encoding {:shape {:field "geo", :type "geojson"}, :color {:field "positive", :type "quantitative"}, :tooltip [{:field "name", :type "nominal"} {:field "positive", :type "quantitative"}]}, :transform [{:lookup "id", :from {:data {:url "https://raw.githubusercontent.com/vega/vega-datasets/master/data/us-10m.json", :format {:type "topojson", :feature "states"}}, :key "id"}, :as "geo"}], :usermeta {:tab {:id :cov2, :label "Cov2", :opts {:order :row, :eltsper 2, :rgap "20px", :cgap "20px", :size "auto"}}, :frame {:top [[gap :size "100px"] [md {:style {:font-size "16px"}} "**Cov2 positives per state**"]], :left [[p {:style {:width "100px", :min-width "100px"}}]], :fid :f1, :at :end, :pos :after}, :opts {:export {:png true, :svg true}, :scaleFactor 1, :editor true, :source false, :renderer "canvas", :mode "vega-lite"}, :vid :cov2-1, :msgop :tabs, :session-name "Exploring"}, :mark "geoshape", :width 700, :background "floralwhite", :projection {:type "albersUsa"}, :height 500, :data {:values [{:pop 734002, :name "Alaska", :positive "12", :state "AK", :id 2, :pos100K 1.63} {:pop 4908621, :name "Alabama", :positive "124", :state "AL", :id 1, :pos100K 2.53} {:pop 3038999, :name "Arkansas", :positive "100", :state "AR", :id 5, :pos100K 3.29} {:pop 7378494, :name "Arizona", :positive "65", :state "AZ", :id 4, :pos100K 0.88} {:pop 39937489, :name "California", :positive "1241", :state "CA", :id 6, :pos100K 3.11} {:pop 5845526, :name "Colorado", :positive "363", :state "CO", :id 8, :pos100K 6.21} {:pop 3563077, :name "Connecticut", :positive "194", :state "CT", :id 9, :pos100K 5.44} {:pop 982895, :name "Delaware", :positive "40", :state "DE", :id 10, :pos100K 4.07} {:pop 21992985, :name "Florida", :positive "658", :state "FL", :id 12, :pos100K 2.99} {:pop 10736059, :name "Georgia", :positive "420", :state "GA", :id 13, :pos100K 3.91} {:pop 1412687, :name "Hawaii", :positive "37", :state "HI", :id 15, :pos100K 2.62} {:pop 3179849, :name "Iowa", :positive "45", :state "IA", :id 19, :pos100K 1.42} {:pop 1826156, :name "Idaho", :positive "31", :state "ID", :id 16, :pos100K 1.7} {:pop 12659682, :name "Illinois", :positive "590", :state "IL", :id 17, :pos100K 4.66} {:pop 6745354, :name "Indiana", :positive "126", :state "IN", :id 18, :pos100K 1.87} {:pop 2910357, :name "Kansas", :positive "44", :state "KS", :id 20, :pos100K 1.51} {:pop 4499692, :name "Kentucky", :positive "54", :state "KY", :id 21, :pos100K 1.2} {:pop 4645184, :name "Louisiana", :positive "585", :state "LA", :id 22, :pos100K 12.59} {:pop 6976597, :name "Massachusetts", :positive "413", :state "MA", :id 25, :pos100K 5.92} {:pop 6083116, :name "Maryland", :positive "190", :state "MD", :id 24, :pos100K 3.12} {:pop 1345790, :name "Maine", :positive "57", :state "ME", :id 23, :pos100K 4.24} {:pop 10045029, :name "Michigan", :positive "549", :state "MI", :id 26, :pos100K 5.47} {:pop 5700671, :name "Minnesota", :positive "138", :state "MN", :id 27, :pos100K 2.42} {:pop 6169270, :name "Missouri", :positive "73", :state "MO", :id 29, :pos100K 1.18} {:pop 2989260, :name "Mississippi", :positive "140", :state "MS", :id 28, :pos100K 4.68} {:pop 1086759, :name "Montana", :positive "20", :state "MT", :id 30, :pos100K 1.84} {:pop 10611862, :name "North Carolina", :positive "184", :state "NC", :id 37, :pos100K 1.73} {:pop 761723, :name "North Dakota", :positive "28", :state "ND", :id 38, :pos100K 3.68} {:pop 1952570, :name "Nebraska", :positive "38", :state "NE", :id 31, :pos100K 1.95} {:pop 1371246, :name "New Hampshire", :positive "55", :state "NH", :id 33, :pos100K 4.01} {:pop 8936574, :name "New Jersey", :positive "890", :state "NJ", :id 34, :pos100K 9.96} {:pop 2096640, :name "New Mexico", :positive "43", :state "NM", :id 35, :pos100K 2.05} {:pop 3139658, :name "Nevada", :positive "124", :state "NV", :id 32, :pos100K 3.95} {:pop 19440469, :name "New York", :positive "10356", :state "NY", :id 36, :pos100K 53.27} {:pop 11747694, :name "Ohio", :positive "169", :state "OH", :id 39, :pos100K 1.44} {:pop 3954821, :name "Oklahoma", :positive "53", :state "OK", :id 40, :pos100K 1.34} {:pop 4301089, :name "Oregon", :positive "114", :state "OR", :id 41, :pos100K 2.65} {:pop 12820878, :name "Pennsylvania", :positive "371", :state "PA", :id 42, :pos100K 2.89} {:pop 1056161, :name "Rhode Island", :positive "54", :state "RI", :id 44, :pos100K 5.11} {:pop 5210095, :name "South Carolina", :positive "125", :state "SC", :id 45, :pos100K 2.4} {:pop 903027, :name "South Dakota", :positive "14", :state "SD", :id 46, :pos100K 1.55} {:pop 6897576, :name "Tennessee", :positive "228", :state "TN", :id 47, :pos100K 3.31} {:pop 29472295, :name "Texas", :positive "194", :state "TX", :id 48, :pos100K 0.66} {:pop 3282115, :name "Utah", :positive "112", :state "UT", :id 49, :pos100K 3.41} {:pop 8626207, :name "Virginia", :positive "152", :state "VA", :id 51, :pos100K 1.76} {:pop 628061, :name "Vermont", :positive "29", :state "VT", :id 50, :pos100K 4.62} {:pop 7797095, :name "Washington", :positive "1524", :state "WA", :id 53, :pos100K 19.55} {:pop 5851754, :name "Wisconsin", :positive "206", :state "WI", :id 55, :pos100K 3.52} {:pop 1778070, :name "West Virginia", :positive "8", :state "WV", :id 54, :pos100K 0.45} {:pop 567025, :name "Wyoming", :positive "23", :state "WY", :id 56, :pos100K 4.06}]}} {:encoding {:shape {:field "geo", :type "geojson"}, :color {:field "positive", :type "quantitative", :scale {:type "log"}}, :tooltip [{:field "name", :type "nominal"} {:field "positive", :type "quantitative"}]}, :transform [{:lookup "id", :from {:data {:url "https://raw.githubusercontent.com/vega/vega-datasets/master/data/us-10m.json", :format {:type "topojson", :feature "states"}}, :key "id"}, :as "geo"}], :usermeta {:tab {:id :cov2, :label "Cov2", :opts {:order :row, :eltsper 2, :rgap "20px", :cgap "20px", :size "auto"}}, :frame {:top [[gap :size "100px"] [md {:style {:font-size "16px"}} "**Cov2 Log positives per state**"]], :left [[p {:style {:width "100px", :min-width "100px"}}]], :fid :f2, :at :end, :pos :after}, :opts {:export {:png true, :svg true}, :scaleFactor 1, :editor true, :source false, :renderer "canvas", :mode "vega-lite"}, :vid :cov2-2, :msgop :tabs, :session-name "Exploring"}, :mark "geoshape", :width 700, :background "floralwhite", :projection {:type "albersUsa"}, :height 500, :data {:values [{:pop 734002, :name "Alaska", :positive "12", :state "AK", :id 2, :pos100K 1.63} {:pop 4908621, :name "Alabama", :positive "124", :state "AL", :id 1, :pos100K 2.53} {:pop 3038999, :name "Arkansas", :positive "100", :state "AR", :id 5, :pos100K 3.29} {:pop 7378494, :name "Arizona", :positive "65", :state "AZ", :id 4, :pos100K 0.88} {:pop 39937489, :name "California", :positive "1241", :state "CA", :id 6, :pos100K 3.11} {:pop 5845526, :name "Colorado", :positive "363", :state "CO", :id 8, :pos100K 6.21} {:pop 3563077, :name "Connecticut", :positive "194", :state "CT", :id 9, :pos100K 5.44} {:pop 982895, :name "Delaware", :positive "40", :state "DE", :id 10, :pos100K 4.07} {:pop 21992985, :name "Florida", :positive "658", :state "FL", :id 12, :pos100K 2.99} {:pop 10736059, :name "Georgia", :positive "420", :state "GA", :id 13, :pos100K 3.91} {:pop 1412687, :name "Hawaii", :positive "37", :state "HI", :id 15, :pos100K 2.62} {:pop 3179849, :name "Iowa", :positive "45", :state "IA", :id 19, :pos100K 1.42} {:pop 1826156, :name "Idaho", :positive "31", :state "ID", :id 16, :pos100K 1.7} {:pop 12659682, :name "Illinois", :positive "590", :state "IL", :id 17, :pos100K 4.66} {:pop 6745354, :name "Indiana", :positive "126", :state "IN", :id 18, :pos100K 1.87} {:pop 2910357, :name "Kansas", :positive "44", :state "KS", :id 20, :pos100K 1.51} {:pop 4499692, :name "Kentucky", :positive "54", :state "KY", :id 21, :pos100K 1.2} {:pop 4645184, :name "Louisiana", :positive "585", :state "LA", :id 22, :pos100K 12.59} {:pop 6976597, :name "Massachusetts", :positive "413", :state "MA", :id 25, :pos100K 5.92} {:pop 6083116, :name "Maryland", :positive "190", :state "MD", :id 24, :pos100K 3.12} {:pop 1345790, :name "Maine", :positive "57", :state "ME", :id 23, :pos100K 4.24} {:pop 10045029, :name "Michigan", :positive "549", :state "MI", :id 26, :pos100K 5.47} {:pop 5700671, :name "Minnesota", :positive "138", :state "MN", :id 27, :pos100K 2.42} {:pop 6169270, :name "Missouri", :positive "73", :state "MO", :id 29, :pos100K 1.18} {:pop 2989260, :name "Mississippi", :positive "140", :state "MS", :id 28, :pos100K 4.68} {:pop 1086759, :name "Montana", :positive "20", :state "MT", :id 30, :pos100K 1.84} {:pop 10611862, :name "North Carolina", :positive "184", :state "NC", :id 37, :pos100K 1.73} {:pop 761723, :name "North Dakota", :positive "28", :state "ND", :id 38, :pos100K 3.68} {:pop 1952570, :name "Nebraska", :positive "38", :state "NE", :id 31, :pos100K 1.95} {:pop 1371246, :name "New Hampshire", :positive "55", :state "NH", :id 33, :pos100K 4.01} {:pop 8936574, :name "New Jersey", :positive "890", :state "NJ", :id 34, :pos100K 9.96} {:pop 2096640, :name "New Mexico", :positive "43", :state "NM", :id 35, :pos100K 2.05} {:pop 3139658, :name "Nevada", :positive "124", :state "NV", :id 32, :pos100K 3.95} {:pop 19440469, :name "New York", :positive "10356", :state "NY", :id 36, :pos100K 53.27} {:pop 11747694, :name "Ohio", :positive "169", :state "OH", :id 39, :pos100K 1.44} {:pop 3954821, :name "Oklahoma", :positive "53", :state "OK", :id 40, :pos100K 1.34} {:pop 4301089, :name "Oregon", :positive "114", :state "OR", :id 41, :pos100K 2.65} {:pop 12820878, :name "Pennsylvania", :positive "371", :state "PA", :id 42, :pos100K 2.89} {:pop 1056161, :name "Rhode Island", :positive "54", :state "RI", :id 44, :pos100K 5.11} {:pop 5210095, :name "South Carolina", :positive "125", :state "SC", :id 45, :pos100K 2.4} {:pop 903027, :name "South Dakota", :positive "14", :state "SD", :id 46, :pos100K 1.55} {:pop 6897576, :name "Tennessee", :positive "228", :state "TN", :id 47, :pos100K 3.31} {:pop 29472295, :name "Texas", :positive "194", :state "TX", :id 48, :pos100K 0.66} {:pop 3282115, :name "Utah", :positive "112", :state "UT", :id 49, :pos100K 3.41} {:pop 8626207, :name "Virginia", :positive "152", :state "VA", :id 51, :pos100K 1.76} {:pop 628061, :name "Vermont", :positive "29", :state "VT", :id 50, :pos100K 4.62} {:pop 7797095, :name "Washington", :positive "1524", :state "WA", :id 53, :pos100K 19.55} {:pop 5851754, :name "Wisconsin", :positive "206", :state "WI", :id 55, :pos100K 3.52} {:pop 1778070, :name "West Virginia", :positive "8", :state "WV", :id 54, :pos100K 0.45} {:pop 567025, :name "Wyoming", :positive "23", :state "WY", :id 56, :pos100K 4.06}]}} {:encoding {:shape {:field "geo", :type "geojson"}, :color {:field "pos100K", :type "quantitative"}, :tooltip [{:field "name", :type "nominal"} {:field "pop", :type "quantitative"} {:field "positive", :type "quantitative"} {:field "pos100K", :type "quantitative"}]}, :transform [{:lookup "id", :from {:data {:url "https://raw.githubusercontent.com/vega/vega-datasets/master/data/us-10m.json", :format {:type "topojson", :feature "states"}}, :key "id"}, :as "geo"}], :usermeta {:tab {:id :cov2, :label "Cov2", :opts {:order :row, :eltsper 2, :rgap "20px", :cgap "20px", :size "auto"}}, :frame {:top [[gap :size "100px"] [md {:style {:font-size "16px"}} "**Cov2 positives per 100K population**"]], :left [[p {:style {:width "100px", :min-width "100px"}}]], :fid :f3, :at :end, :pos :after}, :opts {:export {:png true, :svg true}, :scaleFactor 1, :editor true, :source false, :renderer "canvas", :mode "vega-lite"}, :vid :cov2-3, :msgop :tabs, :session-name "Exploring"}, :mark "geoshape", :width 700, :background "floralwhite", :projection {:type "albersUsa"}, :height 500, :data {:values [{:pop 734002, :name "Alaska", :positive "12", :state "AK", :id 2, :pos100K 1.63} {:pop 4908621, :name "Alabama", :positive "124", :state "AL", :id 1, :pos100K 2.53} {:pop 3038999, :name "Arkansas", :positive "100", :state "AR", :id 5, :pos100K 3.29} {:pop 7378494, :name "Arizona", :positive "65", :state "AZ", :id 4, :pos100K 0.88} {:pop 39937489, :name "California", :positive "1241", :state "CA", :id 6, :pos100K 3.11} {:pop 5845526, :name "Colorado", :positive "363", :state "CO", :id 8, :pos100K 6.21} {:pop 3563077, :name "Connecticut", :positive "194", :state "CT", :id 9, :pos100K 5.44} {:pop 982895, :name "Delaware", :positive "40", :state "DE", :id 10, :pos100K 4.07} {:pop 21992985, :name "Florida", :positive "658", :state "FL", :id 12, :pos100K 2.99} {:pop 10736059, :name "Georgia", :positive "420", :state "GA", :id 13, :pos100K 3.91} {:pop 1412687, :name "Hawaii", :positive "37", :state "HI", :id 15, :pos100K 2.62} {:pop 3179849, :name "Iowa", :positive "45", :state "IA", :id 19, :pos100K 1.42} {:pop 1826156, :name "Idaho", :positive "31", :state "ID", :id 16, :pos100K 1.7} {:pop 12659682, :name "Illinois", :positive "590", :state "IL", :id 17, :pos100K 4.66} {:pop 6745354, :name "Indiana", :positive "126", :state "IN", :id 18, :pos100K 1.87} {:pop 2910357, :name "Kansas", :positive "44", :state "KS", :id 20, :pos100K 1.51} {:pop 4499692, :name "Kentucky", :positive "54", :state "KY", :id 21, :pos100K 1.2} {:pop 4645184, :name "Louisiana", :positive "585", :state "LA", :id 22, :pos100K 12.59} {:pop 6976597, :name "Massachusetts", :positive "413", :state "MA", :id 25, :pos100K 5.92} {:pop 6083116, :name "Maryland", :positive "190", :state "MD", :id 24, :pos100K 3.12} {:pop 1345790, :name "Maine", :positive "57", :state "ME", :id 23, :pos100K 4.24} {:pop 10045029, :name "Michigan", :positive "549", :state "MI", :id 26, :pos100K 5.47} {:pop 5700671, :name "Minnesota", :positive "138", :state "MN", :id 27, :pos100K 2.42} {:pop 6169270, :name "Missouri", :positive "73", :state "MO", :id 29, :pos100K 1.18} {:pop 2989260, :name "Mississippi", :positive "140", :state "MS", :id 28, :pos100K 4.68} {:pop 1086759, :name "Montana", :positive "20", :state "MT", :id 30, :pos100K 1.84} {:pop 10611862, :name "North Carolina", :positive "184", :state "NC", :id 37, :pos100K 1.73} {:pop 761723, :name "North Dakota", :positive "28", :state "ND", :id 38, :pos100K 3.68} {:pop 1952570, :name "Nebraska", :positive "38", :state "NE", :id 31, :pos100K 1.95} {:pop 1371246, :name "New Hampshire", :positive "55", :state "NH", :id 33, :pos100K 4.01} {:pop 8936574, :name "New Jersey", :positive "890", :state "NJ", :id 34, :pos100K 9.96} {:pop 2096640, :name "New Mexico", :positive "43", :state "NM", :id 35, :pos100K 2.05} {:pop 3139658, :name "Nevada", :positive "124", :state "NV", :id 32, :pos100K 3.95} {:pop 19440469, :name "New York", :positive "10356", :state "NY", :id 36, :pos100K 53.27} {:pop 11747694, :name "Ohio", :positive "169", :state "OH", :id 39, :pos100K 1.44} {:pop 3954821, :name "Oklahoma", :positive "53", :state "OK", :id 40, :pos100K 1.34} {:pop 4301089, :name "Oregon", :positive "114", :state "OR", :id 41, :pos100K 2.65} {:pop 12820878, :name "Pennsylvania", :positive "371", :state "PA", :id 42, :pos100K 2.89} {:pop 1056161, :name "Rhode Island", :positive "54", :state "RI", :id 44, :pos100K 5.11} {:pop 5210095, :name "South Carolina", :positive "125", :state "SC", :id 45, :pos100K 2.4} {:pop 903027, :name "South Dakota", :positive "14", :state "SD", :id 46, :pos100K 1.55} {:pop 6897576, :name "Tennessee", :positive "228", :state "TN", :id 47, :pos100K 3.31} {:pop 29472295, :name "Texas", :positive "194", :state "TX", :id 48, :pos100K 0.66} {:pop 3282115, :name "Utah", :positive "112", :state "UT", :id 49, :pos100K 3.41} {:pop 8626207, :name "Virginia", :positive "152", :state "VA", :id 51, :pos100K 1.76} {:pop 628061, :name "Vermont", :positive "29", :state "VT", :id 50, :pos100K 4.62} {:pop 7797095, :name "Washington", :positive "1524", :state "WA", :id 53, :pos100K 19.55} {:pop 5851754, :name "Wisconsin", :positive "206", :state "WI", :id 55, :pos100K 3.52} {:pop 1778070, :name "West Virginia", :positive "8", :state "WV", :id 54, :pos100K 0.45} {:pop 567025, :name "Wyoming", :positive "23", :state "WY", :id 56, :pos100K 4.06}]}} {:encoding {:shape {:field "geo", :type "geojson"}, :color {:field "pos100K", :type "quantitative", :scale {:type "log"}}, :tooltip [{:field "name", :type "nominal"} {:field "pop", :type "quantitative"} {:field "positive", :type "quantitative"} {:field "pos100K", :type "quantitative"}]}, :transform [{:lookup "id", :from {:data {:url "https://raw.githubusercontent.com/vega/vega-datasets/master/data/us-10m.json", :format {:type "topojson", :feature "states"}}, :key "id"}, :as "geo"}], :usermeta {:tab {:id :cov2, :label "Cov2", :opts {:order :row, :eltsper 2, :rgap "20px", :cgap "20px", :size "auto"}}, :frame {:top [[gap :size "100px"] [md {:style {:font-size "16px"}} "**Cov2 Log positives per 100K population**"]], :left [[p {:style {:width "100px", :min-width "100px"}}]], :fid :f4, :at :end, :pos :after}, :opts {:export {:png true, :svg true}, :scaleFactor 1, :editor true, :source false, :renderer "canvas", :mode "vega-lite"}, :vid :cov2-4, :msgop :tabs, :session-name "Exploring"}, :mark "geoshape", :width 700, :background "floralwhite", :projection {:type "albersUsa"}, :height 500, :data {:values [{:pop 734002, :name "Alaska", :positive "12", :state "AK", :id 2, :pos100K 1.63} {:pop 4908621, :name "Alabama", :positive "124", :state "AL", :id 1, :pos100K 2.53} {:pop 3038999, :name "Arkansas", :positive "100", :state "AR", :id 5, :pos100K 3.29} {:pop 7378494, :name "Arizona", :positive "65", :state "AZ", :id 4, :pos100K 0.88} {:pop 39937489, :name "California", :positive "1241", :state "CA", :id 6, :pos100K 3.11} {:pop 5845526, :name "Colorado", :positive "363", :state "CO", :id 8, :pos100K 6.21} {:pop 3563077, :name "Connecticut", :positive "194", :state "CT", :id 9, :pos100K 5.44} {:pop 982895, :name "Delaware", :positive "40", :state "DE", :id 10, :pos100K 4.07} {:pop 21992985, :name "Florida", :positive "658", :state "FL", :id 12, :pos100K 2.99} {:pop 10736059, :name "Georgia", :positive "420", :state "GA", :id 13, :pos100K 3.91} {:pop 1412687, :name "Hawaii", :positive "37", :state "HI", :id 15, :pos100K 2.62} {:pop 3179849, :name "Iowa", :positive "45", :state "IA", :id 19, :pos100K 1.42} {:pop 1826156, :name "Idaho", :positive "31", :state "ID", :id 16, :pos100K 1.7} {:pop 12659682, :name "Illinois", :positive "590", :state "IL", :id 17, :pos100K 4.66} {:pop 6745354, :name "Indiana", :positive "126", :state "IN", :id 18, :pos100K 1.87} {:pop 2910357, :name "Kansas", :positive "44", :state "KS", :id 20, :pos100K 1.51} {:pop 4499692, :name "Kentucky", :positive "54", :state "KY", :id 21, :pos100K 1.2} {:pop 4645184, :name "Louisiana", :positive "585", :state "LA", :id 22, :pos100K 12.59} {:pop 6976597, :name "Massachusetts", :positive "413", :state "MA", :id 25, :pos100K 5.92} {:pop 6083116, :name "Maryland", :positive "190", :state "MD", :id 24, :pos100K 3.12} {:pop 1345790, :name "Maine", :positive "57", :state "ME", :id 23, :pos100K 4.24} {:pop 10045029, :name "Michigan", :positive "549", :state "MI", :id 26, :pos100K 5.47} {:pop 5700671, :name "Minnesota", :positive "138", :state "MN", :id 27, :pos100K 2.42} {:pop 6169270, :name "Missouri", :positive "73", :state "MO", :id 29, :pos100K 1.18} {:pop 2989260, :name "Mississippi", :positive "140", :state "MS", :id 28, :pos100K 4.68} {:pop 1086759, :name "Montana", :positive "20", :state "MT", :id 30, :pos100K 1.84} {:pop 10611862, :name "North Carolina", :positive "184", :state "NC", :id 37, :pos100K 1.73} {:pop 761723, :name "North Dakota", :positive "28", :state "ND", :id 38, :pos100K 3.68} {:pop 1952570, :name "Nebraska", :positive "38", :state "NE", :id 31, :pos100K 1.95} {:pop 1371246, :name "New Hampshire", :positive "55", :state "NH", :id 33, :pos100K 4.01} {:pop 8936574, :name "New Jersey", :positive "890", :state "NJ", :id 34, :pos100K 9.96} {:pop 2096640, :name "New Mexico", :positive "43", :state "NM", :id 35, :pos100K 2.05} {:pop 3139658, :name "Nevada", :positive "124", :state "NV", :id 32, :pos100K 3.95} {:pop 19440469, :name "New York", :positive "10356", :state "NY", :id 36, :pos100K 53.27} {:pop 11747694, :name "Ohio", :positive "169", :state "OH", :id 39, :pos100K 1.44} {:pop 3954821, :name "Oklahoma", :positive "53", :state "OK", :id 40, :pos100K 1.34} {:pop 4301089, :name "Oregon", :positive "114", :state "OR", :id 41, :pos100K 2.65} {:pop 12820878, :name "Pennsylvania", :positive "371", :state "PA", :id 42, :pos100K 2.89} {:pop 1056161, :name "Rhode Island", :positive "54", :state "RI", :id 44, :pos100K 5.11} {:pop 5210095, :name "South Carolina", :positive "125", :state "SC", :id 45, :pos100K 2.4} {:pop 903027, :name "South Dakota", :positive "14", :state "SD", :id 46, :pos100K 1.55} {:pop 6897576, :name "Tennessee", :positive "228", :state "TN", :id 47, :pos100K 3.31} {:pop 29472295, :name "Texas", :positive "194", :state "TX", :id 48, :pos100K 0.66} {:pop 3282115, :name "Utah", :positive "112", :state "UT", :id 49, :pos100K 3.41} {:pop 8626207, :name "Virginia", :positive "152", :state "VA", :id 51, :pos100K 1.76} {:pop 628061, :name "Vermont", :positive "29", :state "VT", :id 50, :pos100K 4.62} {:pop 7797095, :name "Washington", :positive "1524", :state "WA", :id 53, :pos100K 19.55} {:pop 5851754, :name "Wisconsin", :positive "206", :state "WI", :id 55, :pos100K 3.52} {:pop 1778070, :name "West Virginia", :positive "8", :state "WV", :id 54, :pos100K 0.45} {:pop 567025, :name "Wyoming", :positive "23", :state "WY", :id 56, :pos100K 4.06}]}}]}}]
